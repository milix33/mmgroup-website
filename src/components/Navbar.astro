---
import { LANGS, LABELS, translations } from '../i18n/translations';

interface Props {
  lang?: 'sr' | 'de' | 'en';
  currentPath?: string; // npr. '' (home), 'services', 'pricing'
}

const { lang, currentPath = '' } = Astro.props;
const isMultilang = lang != null;
const activeLang = lang ?? 'sr';
const t = translations[activeLang].nav;
const base = isMultilang ? `/${activeLang}` : '';
const navLinks = [
  { path: '', label: t.home },
  { path: 'services', label: t.services },
  { path: 'portfolio', label: t.portfolio },
  { path: 'pricing', label: t.pricing },
  { path: 'about', label: t.about },
  { path: 'contact', label: t.contact },
];
function href(path: string) {
  if (!isMultilang) return path ? `/${path}` : '/';
  return path ? `/${activeLang}/${path}` : `/${activeLang}`;
}
---

<nav class="bg-slate-900/95 backdrop-blur-md border-b border-slate-700 sticky top-0 z-50 shadow-lg shadow-slate-900/10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <div class="flex-shrink-0">
        <a href={href('')} class="flex items-center group">
          <span class="text-xl font-bold text-white group-hover:text-indigo-300 transition-all duration-300">
            ZIPTV TECH SOLUTIONS
          </span>
        </a>
      </div>
      
      <div class="hidden md:flex md:items-center md:space-x-6">
        {navLinks.map((link) => (
          <a 
            href={href(link.path)}
            class="text-slate-300 hover:text-white transition-all duration-300 font-medium relative group"
          >
            {link.label}
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-indigo-400 group-hover:w-full transition-all duration-300"></span>
          </a>
        ))}
        <!-- Language switcher (samo kada je lang postavljen) -->
        {isMultilang && (
          <>
            <span class="text-slate-500 text-sm mr-2">|</span>
            {LANGS.filter((l) => l !== activeLang).map((l) => (
              <a 
                href={currentPath ? `/${l}/${currentPath}` : `/${l}`}
                class="text-slate-400 hover:text-white text-sm font-medium transition-colors"
              >
                {LABELS[l]}
              </a>
            ))}
          </>
        )}
        <a 
          href={href('contact')}
          class="bg-indigo-500 text-white px-6 py-2 rounded-lg hover:bg-indigo-400 transition-all duration-300 font-medium shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
        >
          {t.requestQuote}
        </a>
      </div>
      
      <div class="md:hidden flex items-center gap-2">
        {isMultilang && <span class="text-slate-500 text-xs">{LABELS[activeLang]}</span>}
        <button 
          id="mobile-menu-btn" 
          type="button" 
          class="text-slate-300 hover:text-white focus:outline-none transition-colors"
          aria-label="Toggle menu"
        >
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
  </div>
  
  <div id="mobile-menu" class="hidden md:hidden border-t border-slate-700 bg-slate-800 backdrop-blur-md">
    <div class="px-4 py-3 space-y-3">
      {navLinks.map((link) => (
        <a 
          href={href(link.path)}
          class="block text-slate-300 hover:text-white transition-colors font-medium py-2"
        >
          {link.label}
        </a>
      ))}
      {isMultilang && (
        <div class="flex gap-3 pt-2 border-t border-slate-600">
          {LANGS.map((l) => (
            <a href={currentPath ? `/${l}/${currentPath}` : `/${l}`} class="text-indigo-400 hover:text-white font-medium">
              {LABELS[l]}
            </a>
          ))}
        </div>
      )}
      <a 
        href={href('contact')}
        class="block bg-indigo-500 text-white px-6 py-3 rounded-lg hover:bg-indigo-400 transition-all duration-300 font-medium text-center"
      >
        {t.requestQuote}
      </a>
    </div>
  </div>
</nav>
